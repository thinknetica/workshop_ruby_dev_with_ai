# Активный контекст проекта

## Текущий фокус
- Творческая фаза проектирования UI/UX компонентов
- Разработка дизайн-системы и прототипов интерфейса
- Проектирование пользовательских сценариев и взаимодействий

## Результаты анализа сложности
- **Тип задачи**: Создание новой системы
- **Охват**: Множественные подсистемы (аутентификация, чаты, сообщения, интеграция с GitHub)
- **Время**: Недели до месяцев
- **Риск**: Высокий, архитектурный
- **Зависимости**: GitHub API, Rails, Hotwire, PostgreSQL

## Ключевые архитектурные решения
- **Модель данных**: Семь основных таблиц для хранения данных о пользователях, репозиториях, чатах и сообщениях
- **Отслеживание прочитанных сообщений**: Принято решение не создавать отдельную модель UnreadMessage. Вместо этого статус прочтения реализуется через поле last_read_message_id в таблице chat_users. Это упрощает схему, уменьшает количество таблиц и соответствует текущим требованиям (один маркер прочтения на пользователя в чате). Если в будущем потребуется более сложная логика (например, несколько маркеров или аналитика по ушедшим пользователям), можно будет рассмотреть отдельную таблицу.
- **Интеграция с GitHub**: Синхронизация данных при входе пользователя
- **Автоматическое создание чатов**: На основе общих приватных репозиториев
- **Реализация интерфейса**: Hotwire (Turbo, Stimulus) для динамического обновления без полной перезагрузки страницы
- **Адаптивный дизайн**: Mobile First с использованием Tailwind CSS
- **Многоязычность**: Поддержка русского и английского языков через I18n

## Принятые решения по дизайну
- **Дизайн-система**: Выбран вариант 1 (GitHub-inspired Design System)
  - Цветовая схема, близкая к GitHub для создания узнаваемого интерфейса
  - Типографика с использованием системных шрифтов
  - Минималистичные линейные иконки в стиле GitHub
  - Скругленные углы компонентов (4-6px)
  - Четкая визуальная иерархия для технического контента

- **Процесс аутентификации**: Выбран вариант 3 (Одностраничный процесс с информационными элементами)
  - Страница входа с кнопкой "Войти через GitHub"
  - Раскрывающийся блок с подробной информацией о правах доступа
  - Минимальное количество шагов для пользователя при сохранении прозрачности

- **Страница чата**: Выбран вариант 2 (Интерфейс с верхней навигацией)
  - Навигационная панель вверху с вкладками "Чат" и "Участники"
  - Максимальное использование пространства для сообщений
  - Единый интерфейс для мобильных и десктопных устройств
  - Простое переключение между чатом и информацией об участниках

- **Главная страница со списком чатов**: Выбран вариант 1 (Двухпанельный интерфейс со списком и превью)
  - Слева узкий список чатов с минимальной информацией
  - Справа предпросмотр выбранного чата с последними сообщениями
  - Возможность быстро просматривать содержимое чата без полного перехода
  - Эффективное использование пространства на десктопных устройствах

- **Страница профиля пользователя**: Выбран вариант 1 (Полная информация с вкладками)
  - Шапка профиля с основной информацией и аватаром
  - Система вкладок для разделения различных категорий информации
  - Отдельные вкладки для основных данных, репозиториев и статистики
  - Детальная организация большого количества информации

## Компоненты для творческой фазы
1. **Дизайн-система** ✅:
   - Цветовая схема (светлая и темная темы)
   - Типографика
   - Компоненты UI (кнопки, поля ввода, карточки и т.д.)
   - Иконки и визуальные элементы

2. **Страница аутентификации** ✅:
   - Процесс входа через GitHub OAuth
   - Запрос прав доступа к приватным репозиториям
   - Обработка ошибок аутентификации

3. **Страница чата** ✅:
   - Отображение сообщений и участников
   - Форма отправки сообщений
   - Бесконечная прокрутка истории сообщений
   - Навигация между вкладками чата и участников

4. **Главная страница с чатами** ✅:
   - Список чатов с индикаторами непрочитанных сообщений
   - Отображение статуса онлайн/офлайн пользователей
   - Предпросмотр содержимого чата без полного перехода
   - Фильтры для разделения чатов на личные и групповые

5. **Страница профиля пользователя** ✅:
   - Шапка профиля с основной информацией
   - Система вкладок (Обзор, Репозитории, Статистика)
   - Отображение активности и биографии пользователя
   - Список репозиториев с фильтрацией и сортировкой

## Технический стек
- Backend: Ruby on Rails (API + Web)
- Frontend: Hotwire (Turbo, Stimulus), Tailwind CSS
- База данных: PostgreSQL
- Аутентификация: OmniAuth GitHub OAuth
- Фоновые задачи: Sidekiq, Redis

## Следующие шаги
- Подготовка к режиму BUILD для начала реализации
